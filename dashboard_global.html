<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Parcours - Le Monde des Curieux</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles/dashboard-global.css">
    <link rel="stylesheet" href="styles/side-menu-unified.css">
    <link rel="stylesheet" href="styles/unified-header.css">
    <link rel="stylesheet" href="styles/unified-footer.css">
</head>
<body class="dashboard-section">

    <button class="menu-toggle-btn" onclick="toggleSideMenu()">â˜°</button>

    <div class="container">
        <header class="header">
            <h1>ğŸ“Š Mon Parcours</h1>
            
            <div class="header-actions">
                <button class="back-home-btn" onclick="window.location.href='index.html'">â† Accueil</button>
                <button class="shop-btn-header" onclick="window.location.href='boutique.html'">ğŸ›’ Boutique</button>
            </div>
        </header>

        <section class="user-profile">
            <div class="profile-avatar">
                <div class="avatar-circle" id="current-avatar-display">ğŸ¦Š</div>
            </div>
            <div class="profile-info">
                <h2 id="user-name">Explorateur Curieux</h2>
                <div class="profile-stats">
                    <span>â­ <span id="global-xp">0</span> XP</span>
                    <span>ğŸ† <span id="global-badges-count">0</span> Badges</span>
                </div>
            </div>
        </section>

        <section class="badges-section">
            <h2>ğŸ† Mes Badges</h2>
            <div id="badges-grid" class="badges-grid" style="display:flex; gap:10px; margin-top:15px;"></div>
        </section>

        <section class="detailed-stats">
            <h2>ğŸ“ˆ Mes ProgrÃ¨s</h2>
            <div class="stats-grid" style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:20px;">
                <div class="stat-card" style="text-align:center; background:rgba(0,0,0,0.2); padding:20px; border-radius:8px;">
                    <div class="stat-card-value" id="total-exercises" style="color:#f1c40f; font-size:20px;">0</div>
                    <div class="stat-card-label" style="font-size:8px;">Missions</div>
                </div>
                <div class="stat-card" style="text-align:center; background:rgba(0,0,0,0.2); padding:20px; border-radius:8px;">
                    <div class="stat-card-value" id="success-rate" style="color:#f1c40f; font-size:20px;">0%</div>
                    <div class="stat-card-label" style="font-size:8px;">PrÃ©cision</div>
                </div>
            </div>
        </section>

        <div class="button-area" style="margin-top: 40px; display: flex; gap: 15px;">
            <button class="btn btn-primary" onclick="window.print()" style="background:#2ecc71; border-color:#27ae60; flex:1;">ğŸ“„ Imprimer mon Rapport</button>
            <button class="btn btn-secondary" onclick="resetAllProgress()" style="flex:1;">ğŸ”„ Tout recommencer</button>
        </div>
    </div>

    <script src="scripts/side-menu-unified.js"></script>
    <script src="scripts/unified-footer.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            if (typeof loadSideMenu === "function") { loadSideMenu(); }

            // Sync localStorage
            const savedAvatar = localStorage.getItem('curio_selected_avatar_emoji');
            if (savedAvatar) document.getElementById('current-avatar-display').innerText = savedAvatar;
            
            document.getElementById('global-xp').innerText = localStorage.getItem('curio_xp') || 0;
            const badges = JSON.parse(localStorage.getItem('curio_badges')) || [];
            document.getElementById('global-badges-count').innerText = badges.length;
            
            const grid = document.getElementById('badges-grid');
            if (grid && badges.length > 0) {
                grid.innerHTML = badges.map(b => `<div style="font-size:25px; background:rgba(255,255,255,0.1); padding:10px; border-radius:50%; border:2px solid #f1c40f;">${b}</div>`).join('');
            }

            const missions = JSON.parse(localStorage.getItem('curio_missions_completed')) || [];
            document.getElementById('total-exercises').innerText = missions.length;
            if(missions.length > 0) document.getElementById('success-rate').innerText = "100%";
        });

        function resetAllProgress() {
            if(confirm("Veux-tu vraiment tout recommencer Ã  zÃ©ro ?")) {
                localStorage.clear();
                window.location.reload();
            }
        }
    </script>
</body>
</html>