<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mesure Ressources</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background: #2c3e50;
      color: white;
      font-family: monospace;
      padding: 20px;
    }
    
    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #3498db;
    }
    
    .instructions {
      background: rgba(52, 152, 219, 0.2);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .wrapper {
      position: relative;
      width: fit-content;
      margin: 0 auto;
      border: 3px solid #3498db;
      border-radius: 10px;
      overflow: hidden;
    }
    
    img {
      display: block;
      max-width: 100%;
      height: auto;
      cursor: crosshair;
    }
    
    .marker {
      position: absolute;
      width: 20px;
      height: 20px;
      background: #e74c3c;
      border: 3px solid white;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
      box-shadow: 0 0 20px rgba(231, 76, 60, 0.8);
      animation: pulse 1s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.2); }
    }
    
    .result-box {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(46, 204, 113, 0.95);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      min-width: 300px;
      max-width: 400px;
    }
    
    .result-box h2 {
      margin-bottom: 15px;
      color: white;
      border-bottom: 2px solid white;
      padding-bottom: 10px;
    }
    
    .coord-display {
      background: rgba(0, 0, 0, 0.3);
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      font-size: 16px;
      word-break: break-all;
    }
    
    .coord-label {
      color: #ecf0f1;
      font-weight: bold;
      display: block;
      margin-bottom: 5px;
    }
    
    .copy-btn {
      background: #3498db;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      width: 100%;
      margin-top: 10px;
      transition: background 0.3s;
    }
    
    .copy-btn:hover {
      background: #2980b9;
    }
    
    .copy-btn:active {
      transform: scale(0.98);
    }
  </style>
</head>
<body>
  <h1>üéØ Mesure Coordonn√©es RESSOURCES</h1>
  
  <div class="instructions">
    <p><strong>CLIQUE UNE FOIS</strong> au centre exact de la bulle <strong>RESSOURCES</strong></p>
    <p>Les coordonn√©es appara√Ætront automatiquement</p>
  </div>

  <div class="wrapper" id="wrapper">
    <img src="images/mindmap_lemondedescurieux_v2.png" id="mindmap" alt="Mindmap">
  </div>

  <div class="result-box" id="resultBox" style="display: none;">
    <h2>‚úÖ Coordonn√©es RESSOURCES</h2>
    
    <div class="coord-display">
      <span class="coord-label">Coordonn√©es natives :</span>
      <span id="nativeCoords">-</span>
    </div>
    
    <div class="coord-display">
      <span class="coord-label">SVG circle :</span>
      <span id="svgCode">-</span>
    </div>
    
    <button class="copy-btn" onclick="copyToClipboard()">üìã Copier le code SVG</button>
  </div>

  <script>
    const img = document.getElementById('mindmap');
    const wrapper = document.getElementById('wrapper');
    const resultBox = document.getElementById('resultBox');
    let clicked = false;

    img.addEventListener('click', function(e) {
      if (clicked) return;
      clicked = true;

      const rect = img.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      // Calculer coordonn√©es natives
      const scaleX = img.naturalWidth / img.clientWidth;
      const scaleY = img.naturalHeight / img.clientHeight;
      
      const nativeX = Math.round(x * scaleX);
      const nativeY = Math.round(y * scaleY);
      const radius = 172; // Rayon standard

      // Afficher marqueur
      const marker = document.createElement('div');
      marker.className = 'marker';
      marker.style.left = x + 'px';
      marker.style.top = y + 'px';
      wrapper.appendChild(marker);

      // Afficher r√©sultats
      document.getElementById('nativeCoords').textContent = 
        `X: ${nativeX}, Y: ${nativeY}, R: ${radius}`;
      
      const svgCode = `<!-- üì¶ Ressources (${nativeX}, ${nativeY}, ${radius}) -->
<a href="ressources_section.html" data-section="Ressources">
    <circle class="clickable-zone" cx="${nativeX}" cy="${nativeY}" r="${radius}" />
</a>`;
      
      document.getElementById('svgCode').textContent = svgCode;
      resultBox.style.display = 'block';

      console.log('‚úÖ Coordonn√©es RESSOURCES:', {
        native: { x: nativeX, y: nativeY, r: radius },
        displayed: { x: Math.round(x), y: Math.round(y) }
      });
    });

    function copyToClipboard() {
      const code = document.getElementById('svgCode').textContent;
      navigator.clipboard.writeText(code).then(() => {
        alert('‚úÖ Code SVG copi√© dans le presse-papier !');
      });
    }

    img.addEventListener('load', () => {
      console.log('üìê Image charg√©e:', {
        native: `${img.naturalWidth}x${img.naturalHeight}`,
        displayed: `${img.clientWidth}x${img.clientHeight}`
      });
    });
  </script>
</body>
</html>
