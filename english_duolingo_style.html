<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Practice - Le Monde des Curieux</title>
    
    <!-- CSS principal -->
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/english_gamified.css">
    
    <!-- Polices -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/curio_favicon.ico">
</head>
<body>
    <!-- Header avec navigation -->
    <header>
        <div class="header-container">
            <a href="index.html" class="back-button">â† Retour</a>
            <h1 class="main-title">English Adventure ğŸ‡¬ğŸ‡§</h1>
            <div class="header-stats">
                <span class="level-indicator">Niveau 1</span>
            </div>
        </div>
    </header>

    <!-- Barre de jeu style Duolingo -->
    <div class="game-header">
        <div id="streak-counter" class="stat-widget"></div>
        <div id="hearts-display" class="stat-widget"></div>
        <div id="xp-bar" class="stat-widget">
            <div class="xp-progress">
                <div class="xp-fill" style="width: 0%"></div>
                <span class="xp-text">0 XP</span>
            </div>
        </div>
    </div>
    
    <!-- Zone de leÃ§on principale -->
    <main class="lesson-container">
        <!-- Zone de question -->
        <div id="question-area" class="question-area">
            <div class="welcome-screen">
                <h2>Bienvenue dans ton aventure anglaise ! ğŸ®</h2>
                <p>Apprends l'anglais en t'amusant avec des jeux et des dÃ©fis !</p>
                <button class="start-button" onclick="startFirstLesson()">
                    Commencer l'aventure !
                </button>
            </div>
        </div>
        
        <!-- Zone de rÃ©ponses -->
        <div id="answer-options" class="answer-options"></div>
        
        <!-- Zone de feedback -->
        <div id="feedback-area" class="feedback-area"></div>
    </main>
    
    <!-- Footer avec informations -->
    <footer>
        <div class="footer-content">
            <p>ğŸ’¡ Astuce : Maintiens ton streak quotidien pour dÃ©bloquer des bonus !</p>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script src="scripts/english-streaks.js"></script>
    <script src="scripts/english-hearts.js"></script>
    <script src="scripts/english-lessons.js"></script>
    
    <!-- Script d'initialisation -->
    <script>
        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', () => {
            // Initialiser les systÃ¨mes si pas dÃ©jÃ  fait
            if (typeof englishLesson === 'undefined') {
                window.englishLesson = new EnglishLessonSystem();
            }
            
            // Fonction pour dÃ©marrer la premiÃ¨re leÃ§on
            window.startFirstLesson = function() {
                englishLesson.startLesson(0);
            };
            
            // VÃ©rifier si l'utilisateur a dÃ©jÃ  commencÃ©
            const progress = JSON.parse(localStorage.getItem('userProgress')) || {};
            if (progress.english && progress.english.lessonsCompleted > 0) {
                // Afficher directement les leÃ§ons disponibles
                showLessonMenu();
            }
        });
        
        // Fonction pour afficher le menu des leÃ§ons
        function showLessonMenu() {
            const questionArea = document.getElementById('question-area');
            const lessons = englishLesson.lessons;
            
            let menuHTML = '<div class="lesson-menu">';
            menuHTML += '<h2>Choisis ta leÃ§on ğŸ“š</h2>';
            menuHTML += '<div class="lesson-grid">';
            
            lessons.forEach((lesson, index) => {
                const isLocked = index > 0 && !isLessonUnlocked(index);
                const className = isLocked ? 'lesson-card locked' : 'lesson-card';
                
                menuHTML += `
                    <div class="${className}" onclick="${isLocked ? '' : `englishLesson.startLesson(${index})`}">
                        <div class="lesson-icon">${isLocked ? 'ğŸ”’' : getIconForLesson(lesson.title)}</div>
                        <h3>${lesson.title}</h3>
                        <div class="lesson-info">
                            <span class="difficulty">Niveau ${lesson.difficulty}</span>
                            <span class="xp-reward">+${lesson.xpReward} XP</span>
                        </div>
                    </div>
                `;
            });
            
            menuHTML += '</div></div>';
            questionArea.innerHTML = menuHTML;
        }
        
        // VÃ©rifier si une leÃ§on est dÃ©bloquÃ©e
        function isLessonUnlocked(index) {
            const progress = JSON.parse(localStorage.getItem('userProgress')) || {};
            return progress.english && progress.english.lessonsCompleted >= index;
        }
        
        // Obtenir l'icÃ´ne pour une leÃ§on
        function getIconForLesson(title) {
            const icons = {
                'Les animaux': 'ğŸ¾',
                'Les couleurs': 'ğŸ¨',
                'La famille': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
                'Les nombres': 'ğŸ”¢',
                'La nourriture': 'ğŸ”',
                'Ã€ l\'Ã©cole': 'ğŸ’',
                'Les vÃªtements': 'ğŸ‘•',
                'Le corps': 'ğŸ‘¤',
                'La maison': 'ğŸ ',
                'Les transports': 'ğŸš—'
            };
            return icons[title] || 'ğŸ“–';
        }
    </script>
</body>
</html>
